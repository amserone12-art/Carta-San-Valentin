<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carta San Valentín</title>

<style>
body{
    margin:0;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    background: linear-gradient(135deg,#ff758c,#ff7eb3);
    font-family: Arial, sans-serif;
    overflow:hidden;
}

/* CORAZON */
.heart-container{
    text-align:center;
    cursor:pointer;
}

.heart{
    width:150px;
    height:150px;
    position:relative;
    transform: rotate(-45deg);
    background:#ff2e63;
    margin:auto;
    animation: latido 1.2s infinite;
}

.heart::before,
.heart::after{
    content:"";
    width:150px;
    height:150px;
    position:absolute;
    background:#ff2e63;
    border-radius:50%;
}

.heart::before{
    top:-75px;
    left:0;
}

.heart::after{
    left:75px;
    top:0;
}

@keyframes latido{
    0%{ transform: rotate(-45deg) scale(1);}
    50%{ transform: rotate(-45deg) scale(1.1);}
    100%{ transform: rotate(-45deg) scale(1);}
}

.heart-text{
    margin-top:25px;
    color:white;
    font-size:28px;
    font-weight:bold;
}

/* CARTA */
.carta{
    position:absolute;
    width:90%;
    max-width:900px;
    height:80%;
    background:white;
    border-radius:25px;
    padding:30px;
    display:none;
    box-shadow:0 20px 50px rgba(0,0,0,0.3);
}

/* ARBOL */
.arbol{
    position:absolute;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    transition:1.5s;
}

.arbol.move{
    left:25%;
}

.heart-leaf{
    position:absolute;
    width:25px;
    height:25px;
    background:#ff4d6d;
    transform: rotate(-45deg);
}

.heart-leaf::before,
.heart-leaf::after{
    content:"";
    width:25px;
    height:25px;
    background:#ff4d6d;
    border-radius:50%;
    position:absolute;
}

.heart-leaf::before{ top:-12px; }
.heart-leaf::after{ left:12px; }

/* MENSAJE */
.mensaje{
    position:absolute;
    right:5%;
    top:20%;
    width:45%;
    opacity:0;
    transition:2s;
}

.mensaje.show{
    opacity:1;
}

.mensaje h2{
    color:#ff2e63;
}

/* CONTADOR */
.contador{
    position:absolute;
    bottom:30px;
    width:100%;
    text-align:center;
    font-size:20px;
}

/* YOUTUBE OCULTO */
#youtubePlayer{
    position:absolute;
    width:1px;
    height:1px;
    opacity:0;
}
</style>
</head>

<body>

<!-- CORAZON -->
<div class="heart-container" onclick="abrirCarta()" id="inicio">
    <div class="heart"></div>
    <div class="heart-text">San Valentín</div>
</div>

<!-- CARTA -->
<div class="carta" id="carta">

    <div class="arbol" id="arbol"></div>

    <div class="mensaje" id="mensaje">
        <h2>Para ti ❤️</h2>
        <p>
Eres la razón de muchas de mis sonrisas.
Gracias por estar en mi vida.
Te amo infinitamente.
        </p>
    </div>

    <div class="contador">
        <b>Mi amor por ti comenzó hace:</b>
        <div id="tiempo"></div>
    </div>

    <!-- MUSICA YOUTUBE -->
    <iframe
        id="youtubePlayer"
        src="https://www.youtube.com/embed/OhJ-S9Nrh7Q?enablejsapi=1&autoplay=0&loop=1&playlist=OhJ-S9Nrh7Q"
        frameborder="0"
        allow="autoplay">
    </iframe>

</div>

<script>

/* CREAR ARBOL */
function crearArbol(){
    const arbol = document.getElementById("arbol");

    let posiciones = [
        [0,0],[30,-40],[-30,-40],
        [50,-80],[-50,-80],
        [0,-120],
        [20,-160],[-20,-160]
    ];

    posiciones.forEach((pos,i)=>{
        setTimeout(()=>{
            let h = document.createElement("div");
            h.className="heart-leaf";
            h.style.left = pos[0]+"px";
            h.style.top = pos[1]+"px";
            arbol.appendChild(h);
        }, i*400);
    });

    setTimeout(()=>{
        arbol.classList.add("move");
        document.getElementById("mensaje").classList.add("show");
    },4000);
}

/* ABRIR CARTA + MUSICA */
function abrirCarta(){
    document.getElementById("inicio").style.display="none";
    document.getElementById("carta").style.display="block";
    crearArbol();

    // Iniciar musica (por click del usuario)
    let iframe = document.getElementById("youtubePlayer");
    iframe.src = "https://www.youtube.com/embed/OhJ-S9Nrh7Q?enablejsapi=1&autoplay=1&loop=1&playlist=OhJ-S9Nrh7Q";
}

/* CONTADOR */
/* FECHA OCTUBRE 2024 */
let fechaInicio = new Date("2024-10-01T00:00:00");

function actualizarTiempo(){
    let ahora = new Date();
    let diff = ahora - fechaInicio;

    let dias = Math.floor(diff / (1000*60*60*24));
    let horas = Math.floor(diff / (1000*60*60)) % 24;
    let minutos = Math.floor(diff / (1000*60)) % 60;
    let segundos = Math.floor(diff / 1000) % 60;

    document.getElementById("tiempo").innerHTML =
        dias+" días "+
        horas+" horas "+
        minutos+" min "+
        segundos+" seg";
}

setInterval(actualizarTiempo,1000);
actualizarTiempo();

</script>

</body>
</html>
