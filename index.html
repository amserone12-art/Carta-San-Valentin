<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Para Ti ‚ù§Ô∏è</title>

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@300;500&display=swap" rel="stylesheet">

<style>
body{
margin:0;
overflow:hidden;
background:#f6efe6;
font-family:Poppins;
}

#scene{
position:fixed;
width:100%;
height:100%;
display:flex;
align-items:center;
justify-content:center;
flex-direction:column;
}

/* CARTA */
#envelope{
width:220px;
height:150px;
background:#fff;
border-radius:10px;
box-shadow:0 20px 40px rgba(0,0,0,.2);
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
transition:transform 1s;
}

#envelope:hover{
transform:scale(1.05);
}

/* CONTENIDO */
#content{
position:absolute;
top:0;
left:0;
width:100%;
height:100%;
display:none;
flex-direction:column;
align-items:center;
justify-content:center;
text-align:center;
}

h1{
font-family:"Great Vibes";
font-size:55px;
color:#b3002d;
margin:20px;
}

#photo{
width:200px;
height:200px;
border-radius:20px;
object-fit:cover;
box-shadow:0 10px 30px rgba(0,0,0,.3);
margin-top:20px;
}

/* CANVAS */
canvas{
position:absolute;
top:0;
left:0;
}

/* PARTICULAS */
.particle{
position:absolute;
font-size:20px;
animation:float 8s linear infinite;
opacity:.7;
}

@keyframes float{
0%{transform:translateY(100vh);}
100%{transform:translateY(-10vh);}
}
</style>
</head>

<body>

<audio autoplay loop>
<source src="https://www.youtube.com/redirect?event=video_description&redir_token=QUFFLUhqa3Q1TFZ6Y1lJd0t3MElYa1VLREx3c0dOOVZxQXxBQ3Jtc0trNEZ5U2JvRXVUdHRBR2xNQmpYUTNSdElqMVBkVHBjTzN4R0lFejNnS2k4c3JITnd5Z1FfWnV2Q0dnQ3k2SzFhZ3lWb2lTQ2x1dDB2QklqSW9ERTRkWVRkTnF1Qy1Xb0g3d2lPNy1fNmRVdw&q=https%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DOhJ-S9Nrh7Q" type="audio/mpeg">
</audio>

<div id="scene">

<div id="envelope">üíå Abrir</div>

<div id="content">
<canvas id="treeCanvas"></canvas>
<h1 id="text"></h1>
<img id="photo" src="TU_FOTO_AQUI.jpg">
</div>

</div>

<script>

const envelope = document.getElementById("envelope");
const content = document.getElementById("content");
const text = document.getElementById("text");

const message = "¬øHola Amoti quieres ser mi San Valentin?";
let i=0;

envelope.onclick = () =>{
envelope.style.display="none";
content.style.display="flex";
typeWriter();
startTree();
startParticles();
}

/* TEXTO MAQUINA */
function typeWriter(){
if(i < message.length){
text.innerHTML += message.charAt(i);
i++;
setTimeout(typeWriter,60);
}
}

/* PARTICULAS */
function startParticles(){
setInterval(()=>{
const p=document.createElement("div");
p.className="particle";
p.innerHTML="‚ù§Ô∏è";
p.style.left=Math.random()*100+"vw";
p.style.fontSize=(15+Math.random()*25)+"px";
document.body.appendChild(p);

setTimeout(()=>p.remove(),8000);
},300);
}

/* ARBOL CINE */
function startTree(){
const canvas=document.getElementById("treeCanvas");
const ctx=canvas.getContext("2d");

canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let branches=[];

function branch(x,y,len,angle,width){
branches.push({x,y,len,angle,width,progress:0});
}

branch(canvas.width/2,canvas.height-100,120,-90,12);

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);

branches.forEach(b=>{
let x2=b.x + Math.cos(b.angle*Math.PI/180)*b.len*b.progress;
let y2=b.y + Math.sin(b.angle*Math.PI/180)*b.len*b.progress;

ctx.strokeStyle="#4b2e2e";
ctx.lineWidth=b.width;
ctx.beginPath();
ctx.moveTo(b.x,b.y);
ctx.lineTo(x2,y2);
ctx.stroke();

if(b.progress < 1){
b.progress+=0.02;
}else if(!b.split){
b.split=true;

if(b.width>2){
branch(x2,y2,b.len*.7,b.angle-25,b.width*.7);
branch(x2,y2,b.len*.7,b.angle+25,b.width*.7);
}else{
drawHeart(x2,y2);
}
}
});

requestAnimationFrame(draw);
}

draw();
}

function drawHeart(x,y){
const canvas=document.getElementById("treeCanvas");
const ctx=canvas.getContext("2d");

ctx.fillStyle="red";
ctx.beginPath();
ctx.moveTo(x,y);
ctx.bezierCurveTo(x-10,y-10,x-20,y+10,x,y+20);
ctx.bezierCurveTo(x+20,y+10,x+10,y-10,x,y);
ctx.fill();
}

</script>

</body>
</html>
